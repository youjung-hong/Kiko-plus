# AWS에서 이중화된 서브넷 구성하기

## 할 일

- IAM 계정 생성 후 MFA 적용
- VPC에 이중화된 subnet 구성

## IAM 계정 생성 후 MFA 적용 

- AWS IAM: 사용자 계정 인증 및 권한 관리를 할 수 있는 서비스
  - 사용자 계정 생성 시, 직접 권한을 부여하거나, 그룹을 지정하여 그룹에 해당하는 권한을 부여할 수 있다.
  - 사용자 계정은 AWS Console에 로그인할 때 사용한다.

- MFA: OTP 2차 인증
  - 활성화하면 해당 IAM 계정으로 로그인할 때, 비밀번호 입력 후 OTP 번호를 입력해야 로그인할 수 있다 

## VPC에 이중화된 subnet 구성

![네트워크 설계](https://cloud-img.hosting.kr/wp-content/uploads/2016/07/22144913/001-1.png)

- VPC: 논리적으로 격리된 가상 네트워크 공간

- CIDR: IP를 할당할 범위
  - 예: 10.0.0.0/8: /8: 2^(32-8)만큼 IP를 할당할 수 있다. (10.0.0.0 ~ 10.255.255.255)

- NAT: 내부망에서 1개의 라우터로 외부망(인터넷)에 접속하는 기술
  - Outbound되는 목적지 IP를 공인 IP로 변경해준다.
  - 라우터에 공인IP 1개만 사용하므로 1개의 공인IP 주소를 절약할 수 있다.
  - 접속하는 호스트가 많을 경우 속도가 느려질 수 있다. 

- Subnet: VPC를 여러 개의 Subnet으로 쪼개어 구성할 수 있다.
  - 서브넷 구성 시 CIDR, 물리서버를 지정한다

- Internet Gateway: 내부망과 외부망을 연결해주는 통로
  - Subnet의 라우팅 테이블에 인터넷게이트웨이가 목적지인 라우팅 값이 있으면 Public Subnet, 없으면 Private Subnet이다
  
- Bastion Host: 외부망에서 Bastion Host를 통해 사설망에 접속할 수 있다. 
  - 라우팅 테이블에 SSH Inbound 규칙을 추가하여 외부에서 접속할 수 있게 한다. 

